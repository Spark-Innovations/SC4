<meta charset="UTF-8">

<script src=jquery.js></script>
<script src=nacl.js></script>
<script src=purify.js></script>
<script src=sc4.js></script>

<link rel=stylesheet href=sc4.css>

<!-- SC4 HTML starts here -->

<script>
$(sc4.init);
</script>

<div id=nojs class=toplevel style='display:block'>
You appear to have Javascript disabled.  Javascript is required for this application.  Please enable it and reload this page.
</div>

<div id=initializing class=toplevel>
Initializing... this should take less than one second.  If you can actually
read this message, something has gone wrong.
</div>

<div id=no-localstorage class=toplevel>
<h1>SC4 Error</h1>
You appear to have private browsing mode enabled.  SC4 stores
important information (your encryption keys) in your browser's
localStorage, which is disabled when private browsing mode is turned
on, so SC4 won't work.  To use SC4 please disable private browsing
mode and reload this page.  If you are paranoid (and there's nothing wrong
with being paranoid where security is concerned)  you can disconnect
from the network after you have re-loaded this page.  SC4 is a
standalone application and does not require a network connection.
</div>

<div id=initial-setup class=toplevel>
<h1>Welcome to SC4!</h1>

To get started, please enter your email address.  This will only be
used to identify your key, and it will only be stored locally in your
browser.  It will only be sent to our server if you choose later
to register your key with us.

<br><br>
Please enter your email address:
 <input type=text id=email>
 <input type=button value=Submit onClick='sc4.initial_setup()'>
</div>

<div id=generate_local_sc4 class=toplevel>
<h1>Welcome to SC4!</h1>
You are running this code from a local copy rather than
from a server.  In order to be secure when running this way you need to
generate a customized version of SC4 that has your private keys embedded
within the code instead of being stored in your browser.
<br><br>
To generate a copy of SC4 that you can run from a local file
<input type=button onClick='sc4.genlocal()' value='click here'>.  Save
the resulting file and then open it in your browser.  IMPORTANT: this file
will have your keys embedded within it, so don't share it with anyone!
<br><br>
NOTE: It is strongly recommended that you run this in Firefox or Chrome
and not Safari.  This is because Safari discards the suggested file name
of locally generated downloads, but the file name needs to be randomized
in order to better secure the embedded keys.
</div>

<div id=generating_local_sc4 class=toplevel>
Generating a local copy of SC4 with embedded keys...
</div>

<div id=main class='toplevel'>
  <div class='dropzone fullscreen'></div>
  <div class='dropmsg'>
    Drop file to process it
  </div>
  <h1>SC4</h1>
  <h2>Secure Communications For Mere Mortals</h2>
    Encrypt for:
    <select id=recipient class=rx_menu>
    </select> or
    <input type=button value="Connect with a new user"
	   onClick='sc4.export_my_key()'>
    <a href=https://sc4.us/help.html target=help style='float:right'>Help</a>
    <br><br>Drag-and-drop a file, or enter text:<br>
    <textarea id=text rows=20></textarea>
    <br>
    Output to:
    <input type=radio name=op1 value=email checked>Email
    <input type=radio name=op1 value=download>Download
    <span style='float:right'>
      <input type=checkbox id=encrypt checked>Encrypt
      <input type=checkbox id=sign>Sign
      <input type=button value="Submit" onClick='sc4.encsign()'>
      <input type=button value="Clear" onClick="$('#text').val('')">
    </span>
  </div>
</div>

<div id=write_check class=toplevel>
<h1>Write a check</h1>
Pay to the order of: <select id=pay_to class=rx_menu></select><br>
Amount: <input id=check_amount type=text><br>
Memo: <br>
<textarea id=check_memo rows=5 cols=80></textarea>
<br>
<input type=button value="Send" onClick='sc4.write_check()'>
<input type=button value='Cancel' onClick='sc4.show("main")'>
</div>

<div id=invitation style='display:none'>
Hello,

I would like to send you a secure message using SC4.  Please go to
https://sc4.us/sc4.html, enter your email address, and then copy
and paste the following text so that we can connect:

</div>

<div id=msg class=toplevel>
  <div id=msgcontent></div>
  <input type=button value='Dismiss' onClick='sc4.show("main")' style='float:right'>
  <br><br><br>
</div>
