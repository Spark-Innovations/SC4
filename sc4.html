<!doctype html>
<meta charset="UTF-8">

<meta http-equiv="Content-Security-Policy" content=
"default-src 'none'; object-src 'self'; script-src 'self'; style-src 'self'; frame-src 'self' blob:;">

<script src=jquery.js></script>
<script src=nacl-fast.js></script>
<script src=purify.js></script>
<script src=sc4.js></script>

<link rel=stylesheet href=sc4.css>

<!-- SC4 HTML starts here -->

<div id=nojs>
You appear to have Javascript disabled.  Javascript is required for this application.  Please enable it and reload this page.
</div>

<div id=msie class=toplevel>
Sorry, SC4 does not currently work with Microsoft Internet Explorer.
Please use
<a href=https://www.mozilla.org/en-US/firefox/new/>Firefox</a> instead.
(SC4 also works with Chrome and Safari, but Firefox is a better choice
from a security point of view.)
</div>

<div id=initializing class=toplevel>
Initializing... this should take less than one second.  If you can actually
read this message, something has gone wrong.
</div>

<div id=no-localstorage class=toplevel>
<h1>SC4 Error</h1>
You appear to have private browsing mode enabled.  SC4 stores
important information (your encryption keys) in your browser's
localStorage, which is disabled when private browsing mode is turned
on, so SC4 won't work.  To use SC4 please disable private browsing
mode and reload this page.  If you are paranoid (and there's nothing wrong
with being paranoid where security is concerned)  you can disconnect
from the network after you have re-loaded this page.  SC4 is a
standalone application and does not require a network connection.
</div>

<div id=initial-setup class=toplevel>
<h1>Welcome to SC4!</h1>

To get started, please enter your email address.  This will only be
used to identify your key, and it will only be stored locally in your
browser.  It will only be sent to our server if you choose later
to register your key with us.

<br><br>
Please enter your email address:
 <input type=text id=email>
 <input type=button value=Submit click=initial_setup>
</div>

<div id=generate_local_sc4 class=toplevel>
<h1>Welcome to SC4!</h1>
You are running this code from a local copy rather than
from a server.  In order to be secure when running this way, you need to
generate a customized version of SC4 that has your secret key embedded
within the code instead of being stored in your browser.
<br><br>

<span class=red>IMPORTANT!</span> The file you are about to
generate will have your secret key embedded inside it, so you will
need to take some precautions to keep it secure:

<ol>
<li> Don't leave this file in your downloads folder.
<li> Don't share this file with anyone.
<li> Don't use Safari to generate this file.
</ol>

The reason for the third rule is that the generated file will be given
a randomized file name to make it harder for attackers to find it.
Safari discards the file name for generated downloads, which will
undermine this security feature.

<br><br>
To generate a copy of SC4 with an embedded secret key
that you can run from a local file
<input type=button click=generate_local_sc4 value='click here'>.

</div>

<div id=generating_local_sc4 class=toplevel>
Generating a local copy of SC4 with embedded keys...
</div>

<div id=main class='toplevel'>
  <div class='dropzone fullscreen'></div>
  <div class='dropmsg'>
    Drop file to process it
  </div>
  <h1>SC4</h1>
  <h2>Secure Communications For Mere Mortals</h2>
  Encrypt for:
  <select id=recipient class=rx_menu>
  </select> or
  <input type=button value="Connect with a new user" click=export_my_key>
  <a href=https://sc4.us/help.html target=help class=floatright>Help</a>
  <br><br>Drag-and-drop a file, or enter text:<br>
  <textarea id=text rows=20></textarea>
  <br>
  Output to:
  <input type=radio name=op1 value=email checked>Email
  <input type=radio name=op1 value=download>Download
  <span class=floatright>
    <input type=checkbox id=encrypt checked>Encrypt
    <input type=checkbox id=sign>Sign
    <input type=button value="Submit" click=process_text_box_data>
    <input type=button value="Clear" click=clear_text_box_data>
  </span>
</div>

<div id=invitation class=hidden>
Hello,

I would like to send you a secure message using SC4.  Please go to
https://sc4.us/sc4.html, enter your email address, and then copy
and paste the following text so that we can connect:

</div>

<div id=msg class=toplevel>
  <div id=msgcontent></div>
  <input type=button value='Dismiss' class=floatright click=show_main>
  <br><br><br>
</div>
